# List the start up tasks. Learn more https://www.gitpod.io/docs/config-start-tasks/
tasks:
  - name: Compile the protocol buffers & launch the backend with docker-compose
    init: |
      cd app
      docker run --rm -w /app -v $(pwd):/app couchers/grpc ./generate_protos.sh
      docker-compose up --build
  - name: Install and launch the frontend with yarn
    init: |
      cd app/frontend 
      yarn install
    command: yarn start

# List the ports to expose. Learn more https://www.gitpod.io/docs/config-ports/
ports:
  - port: 3000
    onOpen: open-preview
